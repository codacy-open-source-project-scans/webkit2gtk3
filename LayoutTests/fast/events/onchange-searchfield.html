<p>This test verifies that the ENTER key fires the change event.</p>
<hr>
<input id="input" type="search" onchange="changeHandler()" onblur="blurHandler()"></input>
<pre id="console"></pre>

<script>
function log(s)
{
    document.getElementById('console').appendChild(document.createTextNode(s + "\n"));
}

function changeHandler()
{
    log ('PASS: change event fired.\n');
}

function blurHandler()
{
    log ('blur event fired.\n');
}

if (window.testRunner)
    testRunner.dumpAsText();

// change the field
document.getElementById('input').focus();
document.execCommand("InsertText", false, "foo bar baz");

// hit enter
input.focus();
const enterKeyEvent = new KeyboardEvent('keypress', { bubbles: true, cancelable: true, view: window, detail: 0,
    key: 'Enter', code: 'Enter', keyIdentifier: '', keyCode: 13, charCode: 13, which: 13,
    location: 0, ctrlKey: false, altKey: false, shiftKey: false, metaKey: false });
// We use dispatchEvent() here because if eventSender.keyDown() is used
// instead, this test will fail when run with the WPE port.
input.dispatchEvent(enterKeyEvent);

</script>
